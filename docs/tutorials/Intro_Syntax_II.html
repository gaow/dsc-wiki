
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="ipynb_website:version" content="0.9.4" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<link rel="stylesheet" type="text/css" href="../css/jt.css">

<link rel="stylesheet" type="text/css" href="../css/toc2.css">

<link href="../site_libs/jqueryui-1.11.4/jquery-ui.css">
<link rel="stylesheet" href="../site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<link rel="stylesheet" href="../site_libs/font-awesome-4.5.0/css/font-awesome.min.css" rel="stylesheet" />
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
<script src="../site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="../site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="../site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>

<link rel="stylesheet"
      href="../site_libs/highlightjs/jnbinder.min.css"
      type="text/css" />

<script src="../site_libs/highlightjs/highlight.dsc.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>

<script src="../js/doc_toc.js"></script>
<script src="../js/docs.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script>
    MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
        },
        "HTML-CSS": {
            preferredFont: "TeX",
            availableFonts: ["TeX"],
            styles: {
                scale: 110,
                ".MathJax_Display": {
                    "font-size": "110%",
                }
            }
        }
    });
</script>
<script>
function filterDataFrame(id) {
    var input = document.getElementById("search_" + id);
    var filter = input.value.toUpperCase();
    var table = document.getElementById("dataframe_" + id);
    var tr = table.getElementsByTagName("tr");
    // Loop through all table rows, and hide those who don't match the search query
    for (var i = 1; i < tr.length; i++) {
        for (var j = 0; j < tr[i].cells.length; ++j) {
            var matched = false;
            if (tr[i].cells[j].innerHTML.toUpperCase().indexOf(filter) != -1) {
                tr[i].style.display = "";
                matched = true
                break;
            }
            if (!matched)
                tr[i].style.display = "none";
        }
    }
}
function sortDataFrame(id, n, dtype) {
    var table = document.getElementById("dataframe_" + id);
    var tb = table.tBodies[0]; // use `<tbody>` to ignore `<thead>` and `<tfoot>` rows
    var tr = Array.prototype.slice.call(tb.rows, 0); // put rows into array
    if (dtype === 'numeric') {
        var fn = function(a, b) { 
            return parseFloat(a.cells[n].textContent) <= parseFloat(b.cells[n].textContent) ? -1 : 1;
        }
    } else {
        var fn = function(a, b) {
            var c = a.cells[n].textContent.trim().localeCompare(b.cells[n].textContent.trim()); 
            return c > 0 ? 1 : (c < 0 ? -1 : 0) }
    }
    var isSorted = function(array, fn) {
        if (array.length < 2)
            return 1;
        var direction = fn(array[0], array[1]); 
        for (var i = 1; i < array.length - 1; ++i) {
            var d = fn(array[i], array[i+1]);
            if (d == 0)
                continue;
            else if (direction == 0)
                direction = d;
            else if (direction != d)
                return 0;
            }
        return direction;
    }
    var sorted = isSorted(tr, fn);
    if (sorted == 1 || sorted == -1) {
        // if sorted already, reverse it
        for(var i = tr.length - 1; i >= 0; --i)
            tb.appendChild(tr[i]); // append each row in order
    } else {
        tr = tr.sort(fn);
        for(var i = 0; i < tr.length; ++i)
            tb.appendChild(tr[i]); // append each row in order
    }
}
</script>

<script>
$( document ).ready(function(){
            var cfg={'threshold':3,     // depth of toc (number of levels)
             'number_sections': false,
             'toc_cell': false,          // useless here
             'toc_window_display': true, // display the toc window
             "toc_section_display": "block", // display toc contents in the window
             'sideBar':true,       // sidebar or floating window
             'navigate_menu':false       // navigation menu (only in liveNotebook -- do not change)
            }
            var st={};                  // some variables used in the script
            st.rendering_toc_cell = false;
            st.config_loaded = false;
            st.extension_initialized=false;
            st.nbcontainer_marginleft = $('#notebook-container').css('margin-left')
            st.nbcontainer_marginright = $('#notebook-container').css('margin-right')
            st.nbcontainer_width = $('#notebook-container').css('width')
            st.oldTocHeight = undefined
            st.cell_toc = undefined;
            st.toc_index=0;
            // fire the main function with these parameters
            table_of_contents(cfg, st);
            var file=tutorialsDict[$("h1:first").attr("id")];
            $("#toc-level0 a").css("color","#126dce");
            $('a[href="#'+$("h1:first").attr("id")+'"]').hide()
            var docs=tutorialsArray;
            var docs_map=tutorialsArrayMap;
            var pos=tutorialsArray.indexOf(file);
            for (var a=pos;a>=0;a--){
                  $('<li><a href="'+docs[a]+'.html"><font color="#073642"><b>'+docs_map[docs[a]].replace(/_/g," ")+'</b></font></a></li>').insertBefore("#toc-level0 li:eq(0)");
            }
            $('a[href="'+file+'.html'+'"]').css("color","#126dce");
            for (var a=pos+1;a<docs.length;a++){
                  $(".toc #toc-level0").append('<li><a href="'+docs[a]+'.html"><font color="#073642"><b>'+docs_map[docs[a]].replace(/_/g," ")+'</b></font></a></li>');
            }
            // $("#toc-header").hide(); // comment out because it prevents search bar from displaying
    });
</script>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');
  // mark it active
  menuAnchor.parent().addClass('active');
  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>
<div class="container-fluid main-container">
<!-- tabsets -->
<script src="../site_libs/navigation-1.1/tabsets.js"></script>
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>



<title>Dynamic Statistical Comparisons</title>

<style type = "text/css">
body {
  font-family: "Droid Sans";
  padding-top: 66px;
  padding-bottom: 40px;
}
</style>
</head>

<body>
<div tabindex="-1" id="notebook" class="border-box-sizing">
<div class="container" id="notebook-container">

<!-- code folding -->

<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">Dynamic Statistical Comparisons</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
<li>
  <a href="../index.html">Home</a>
</li>
        
<li>
  <a href="../tutorials.html">Tutorials</a>
</li>
        
<li>
  <a href="../installation.html">Installation</a>
</li>
        
<li>
  <a href="../FAQ.html">FAQ</a>
</li>
        
<li>
  <a href="../examples.html">Examples</a>
</li>
        
<li>
  <a href="../reference.html">Reference</a>
</li>
        
      </ul>
        
<ul class="nav navbar-nav navbar-right">
<li>
   <a href="https://github.com/stephenslab/dsc"> <span class="fa fa-github"></span> </a>
</li>
</ul>
        
      </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="DSC-Basics,-Part-II">DSC Basics, Part II<a class="anchor-link" href="#DSC-Basics,-Part-II">&#182;</a></h1><p>This is the second part of the "DSC Basics" tutorial. You should have read already <a href="Intro_Syntax_I.html">DSC Basics, Part I</a>. Here we continue the mean estimation example from the previous part to illustrate new concepts and syntax, particularly the use of <em>module parameters</em>.</p>
<p>Materials used in this tutorial can be found in the <a href="https://github.com/stephenslab/dsc/tree/master/vignettes/one_sample_location">DSC vignettes repository</a>. As before, you may choose to run this example DSC program as you read through the tutorial, but this is not required.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Defining-a-module-parameter">Defining a module parameter<a class="anchor-link" href="#Defining-a-module-parameter">&#182;</a></h2><p>In our example DSC, recall we defined the <code>normal</code> module as follows:</p>

<pre><code>normal: R(x &lt;- rnorm(n = 100,mean = 0,sd = 1))
  $data: x
  $true_mean: 0</code></pre>
<p>In defining this module, we made a poor design decision: the mean used to simulate the data is defined twice, once inside the call to <code>rnorm</code>, where we set <code>mean = 0</code>, and once when we set the module output <code>$true_mean</code> to zero. If we decided to use a different mean to simulate the data, then we would have to be careful to change the code in two different places. It would be better if we had a single variable that defines the mean of the data.</p>
<p>In DSC, it is possible to define such a variable, called a <em>module parameter</em>:</p>

<pre><code>normal: R(x &lt;- rnorm(n = 100,mean = mu,sd = 1))
  mu: 0
  $data: x
  $true_mean: mu</code></pre>
<p>Here, a module parameter <code>mu</code> is defined, and it is set to the value zero. Once we have defined module parameter <code>mu</code>, any R code and module outputs within the <code>normal</code> module may refer to this module parameter.</p>
<p>Now, with this newly defined module, modifying the mean used to simulate the data only requires changing one line of code.</p>
<p>Similarly, we can use a module parameter to specify the mean of the data that are simulated from a $t$ distribution:</p>

<pre><code>t: R(x &lt;- mu + rt(n = 100,df = 2))
  mu: 3
  $data: x
  $true_mean: mu</code></pre>
<p>Note that there is no requirement that the module parameters for the <code>normal</code> and <code>t</code> modules have the same name, <code>mu</code>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="The-order-of-evaluation-inside-a-module">The order of evaluation inside a module<a class="anchor-link" href="#The-order-of-evaluation-inside-a-module">&#182;</a></h2><p>Below, we will give some more elaborate examples of using module parameters inside a DSC. Before continuing, it is important to keep in mind these two points:</p>
<ul>
<li><p>A module parameter cannot depend on any of the module inputs or any other module parameters. In other words, it must be possible to evaluate the module parameter without knowing the values of the module inputs or the values of the other module parameters.</p>
</li>
<li><p>Module parameters are evaluated <em>before</em> the module script. The exact procedure for evaluating a module is as follows:</p>
<ol>
<li>Evaluate any R code used to determine the module parameters.</li>
<li>Set the values of the module parameters.</li>
<li>Initialize the module inputs according to the current values of the pipeline variables.</li>
<li>For each module parameter and module input, define a script variable with the same name and same value. </li>
<li>Evaluate the module script or inline source code. Any variable defined within the global environment in which the script is evaluated is retained for resolving the module outputs.</li>
<li>Set each module output to the stored value of the specified script variable.</li>
</ol>
</li>
</ul>
<p>The evaluation procedure will become more clear as we illustrate it in some of the examples below.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="A-single-module-parameter-with-multiple-values">A single module parameter with multiple values<a class="anchor-link" href="#A-single-module-parameter-with-multiple-values">&#182;</a></h2><p>In the example above, we showed that module parameters can be useful to streamline code by defining a variable that is used in multiple places inside the module. Another reason module parameters are useful is that they can be used to define multiple similar modules.</p>
<p>For example, in the <code>normal</code> module above, we simulated 100 random samples from a normal distribution. If we would like to define a second module that simulates 1,000 random samples from a normal distribution, this is easily done by defining a new module parameter that takes on two possible values:</p>

<pre><code>normal: R(x &lt;- rnorm(n,mean = mu,sd = 1))
  mu: 0
  n: 100, 1000
  $data: x
  $true_mean: mu</code></pre>
<p>Observe that, since we have defined a new module parameter <code>n</code>, we can refer to this module parameter inside the R code that simulates random draws from a normal distribution.</p>
<p>This is equivalent to defining two modules, <code>normal_100</code> and <code>normal_1000</code>, that are the identical in every way except that the first module includes parameter definition <code>n: 100</code> and the second defines <code>n: 100</code>. The code above is of course much more succinct.</p>
<p>The values 100 and 1000 are <em>alternative values</em> for module parameter <code>n</code>; that is, <code>n</code> should not be interpreted as a vector or sequence with two entries, 100 and 1000, but rather should be understood as a single number that is either set to 100 or 1000 depending on the module that is evaluated. Likewise, the values 100 and 1000 define two <em>alternative modules</em>, both named "normal".</p>
<p>Although we have now defined two modules with the same name, "normal", these two modules can be distinguished in the results by the value for the module parameter <code>n</code>. We will illustrate this next.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Executing-and-querying-the-DSC-when-module-alternatives-are-defined-with-a-module-parameter">Executing and querying the DSC when module alternatives are defined with a module parameter<a class="anchor-link" href="#Executing-and-querying-the-DSC-when-module-alternatives-are-defined-with-a-module-parameter">&#182;</a></h2><p>Here we examine how the new DSC works in practice.</p>
<ul>
<li><p>Run the DSC.</p>
</li>
<li><p>The two modules have the same name, but they can be identified in the results by different values for <code>n</code>.</p>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Two-module-parameters-with-multiple-alternatives">Two module parameters with multiple alternatives<a class="anchor-link" href="#Two-module-parameters-with-multiple-alternatives">&#182;</a></h2><p>If you provide more than one value for multiple parameters, DSC considers all combinations. For example:</p>

<pre><code>t: R( x = rt(n, df) )
  n: 100, 1000
  df: 2, 4, 10
  $data: x
  $true_mean: 0</code></pre>
<p>defines a group of six modules, which simulate 100 or 1000 observations from a $t$ distributions with 2, 4 or 10 degrees of freedom.</p>
<p>TO DO: Show the results from running this DSC and querying the results.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Executing-and-querying-the-DSC-when-module-alternatives-are-defined-using-two-module-parameters">Executing and querying the DSC when module alternatives are defined using two module parameters<a class="anchor-link" href="#Executing-and-querying-the-DSC-when-module-alternatives-are-defined-using-two-module-parameters">&#182;</a></h2><p>Run the DSC program and show the results here.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Setting-the-seed-with-a-module-parameter">Setting the seed with a module parameter<a class="anchor-link" href="#Setting-the-seed-with-a-module-parameter">&#182;</a></h2><p>A common use of module parameters is to initialize the state, or "seed", for generating a sequence of pseudorandom numbers. (This section is not essential, and may be skipped if you are pressed for time.)</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Combining-module-parameters-with-module-inputs">Combining module parameters with module inputs<a class="anchor-link" href="#Combining-module-parameters-with-module-inputs">&#182;</a></h2><p>NOTE: trim is a good example to illustrate how it cannot be determined based on the data input.</p>
<p>Now consider the following DSC syntax:</p>

<pre><code>trim_mean: R( y = mean(x, trim) )
  trim: 0, 0.2
  x: $data
  $est_mean: y</code></pre>
<p>defines two modules which compute the trimmed mean of the pipeline variable
<code>$data</code>, with different levels of trimming (0 or 0.2), and output
the result as the pipeline variable <code>$est_mean</code>.</p>
<p>Schematically we might represent this as:</p>

<pre><code># trim_mean(trim=0): $data -&gt; $est_mean
# trim_mean(trim=0.2): $data -&gt; $est_mean</code></pre>
<p>to indicate we have two different modules, each of which take input
<code>$data</code> and output <code>$est_mean</code>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Defining-more-complex-module-parameters">Defining more complex module parameters<a class="anchor-link" href="#Defining-more-complex-module-parameters">&#182;</a></h2><p>Example goes here.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Defining-module-parameters-with-many-alternative-values">Defining module parameters with many alternative values<a class="anchor-link" href="#Defining-module-parameters-with-many-alternative-values">&#182;</a></h2><p>Example for this section:</p>
<p>Start with an example in which the different values of n are 10^1, 10^1.5, 10^2, etc, all defined within R().</p>
<p>Then generate many simulated data sets with different values of n, from very small (10) to very large (1e6) using R{}.</p>
<p>Finally, run the code and show that it works.</p>

</div>
</div>
</div>
<hr>
Copyright (c) 2016-2018 <a href="http://home.uchicago.edu/gaow">Gao Wang</a>, <a href="http://stephenslab.uchicago.edu">Matthew Stephens</a>, <a href="https://pcarbo.github.io">Peter Carbonetto</a> and contributors.<br>&nbsp;&nbsp;&nbsp; Except where otherwise noted, this website is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/3.0/deed.en_US">Creative Commons Attribution 3.0 Unported License</a>.

</div>
</div>
</body>
</html>
