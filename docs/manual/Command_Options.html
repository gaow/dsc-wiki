
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="ipynb_website:version" content="0.9.3" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<link rel="stylesheet" type="text/css" href="../css/jt.css">

<link rel="stylesheet" type="text/css" href="../css/toc2.css">

<link href="../site_libs/jqueryui-1.11.4/jquery-ui.css">
<link rel="stylesheet" href="../site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<link rel="stylesheet" href="../site_libs/font-awesome-4.5.0/css/font-awesome.min.css" rel="stylesheet" />
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
<script src="../site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="../site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="../site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>

<link rel="stylesheet"
      href="../site_libs/highlightjs-1.1/textmate.css"
      type="text/css" />

<script src="../site_libs/highlightjs-1.1/highlight.js"></script>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>

<script src="../js/doc_toc.js"></script>
<script src="../js/docs.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script>
    MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
        },
        "HTML-CSS": {
            preferredFont: "TeX",
            availableFonts: ["TeX"],
            styles: {
                scale: 110,
                ".MathJax_Display": {
                    "font-size": "110%",
                }
            }
        }
    });
</script>
<script>
function filterDataFrame(id) {
    var input = document.getElementById("search_" + id);
    var filter = input.value.toUpperCase();
    var table = document.getElementById("dataframe_" + id);
    var tr = table.getElementsByTagName("tr");
    // Loop through all table rows, and hide those who don't match the search query
    for (var i = 1; i < tr.length; i++) {
        for (var j = 0; j < tr[i].cells.length; ++j) {
            var matched = false;
            if (tr[i].cells[j].innerHTML.toUpperCase().indexOf(filter) != -1) {
                tr[i].style.display = "";
                matched = true
                break;
            }
            if (!matched)
                tr[i].style.display = "none";
        }
    }
}
function sortDataFrame(id, n, dtype) {
    var table = document.getElementById("dataframe_" + id);
    var tb = table.tBodies[0]; // use `<tbody>` to ignore `<thead>` and `<tfoot>` rows
    var tr = Array.prototype.slice.call(tb.rows, 0); // put rows into array
    if (dtype === 'numeric') {
        var fn = function(a, b) { 
            return parseFloat(a.cells[n].textContent) <= parseFloat(b.cells[n].textContent) ? -1 : 1;
        }
    } else {
        var fn = function(a, b) {
            var c = a.cells[n].textContent.trim().localeCompare(b.cells[n].textContent.trim()); 
            return c > 0 ? 1 : (c < 0 ? -1 : 0) }
    }
    var isSorted = function(array, fn) {
        if (array.length < 2)
            return 1;
        var direction = fn(array[0], array[1]); 
        for (var i = 1; i < array.length - 1; ++i) {
            var d = fn(array[i], array[i+1]);
            if (d == 0)
                continue;
            else if (direction == 0)
                direction = d;
            else if (direction != d)
                return 0;
            }
        return direction;
    }
    var sorted = isSorted(tr, fn);
    if (sorted == 1 || sorted == -1) {
        // if sorted already, reverse it
        for(var i = tr.length - 1; i >= 0; --i)
            tb.appendChild(tr[i]); // append each row in order
    } else {
        tr = tr.sort(fn);
        for(var i = 0; i < tr.length; ++i)
            tb.appendChild(tr[i]); // append each row in order
    }
}
</script>

<script>
$( document ).ready(function(){
            var cfg={'threshold':3,     // depth of toc (number of levels)
             'number_sections': false,
             'toc_cell': false,          // useless here
             'toc_window_display': true, // display the toc window
             "toc_section_display": "block", // display toc contents in the window
             'sideBar':true,       // sidebar or floating window
             'navigate_menu':false       // navigation menu (only in liveNotebook -- do not change)
            }
            var st={};                  // some variables used in the script
            st.rendering_toc_cell = false;
            st.config_loaded = false;
            st.extension_initialized=false;
            st.nbcontainer_marginleft = $('#notebook-container').css('margin-left')
            st.nbcontainer_marginright = $('#notebook-container').css('margin-right')
            st.nbcontainer_width = $('#notebook-container').css('width')
            st.oldTocHeight = undefined
            st.cell_toc = undefined;
            st.toc_index=0;
            // fire the main function with these parameters
            table_of_contents(cfg, st);
            var file=manualDict[$("h1:first").attr("id")];
            $("#toc-level0 a").css("color","#126dce");
            $('a[href="#'+$("h1:first").attr("id")+'"]').hide()
            var docs=manualArray;
            var pos=manualArray.indexOf(file);
            for (var a=pos;a>=0;a--){
                  var name=docs[a]
                  $('<li><a href="'+name+'.html"><font color="#073642"><b>'+name.replace(/_/g," ")+'</b></font></a></li>').insertBefore("#toc-level0 li:eq(0)");
            }
            $('a[href="'+file+'.html'+'"]').css("color","#126dce");
            for (var a=pos+1;a<docs.length;a++){
                  var name=docs[a]
                  $(".toc #toc-level0").append('<li><a href="'+name+'.html"><font color="#073642"><b>'+name.replace(/_/g," ")+'</b></font></a></li>');
            }
            // $("#toc-header").hide(); // comment out because it prevents search bar from displaying
    });
</script>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');
  // mark it active
  menuAnchor.parent().addClass('active');
  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>
<div class="container-fluid main-container">
<!-- tabsets -->
<script src="../site_libs/navigation-1.1/tabsets.js"></script>
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>



<title>Dynamic Statistical Comparisons</title>

<style type = "text/css">
body {
  font-family: "Droid Sans";
  padding-top: 66px;
  padding-bottom: 40px;
}
</style>
</head>

<body>
<div tabindex="-1" id="notebook" class="border-box-sizing">
<div class="container" id="notebook-container">

<!-- code folding -->

<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">Dynamic Statistical Comparisons</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
<li>
  <a href="../index.html">Overview</a>
</li>
        
<li>
  <a href="../quick_start.html">Quick Start</a>
</li>
        
<li>
  <a href="../manual.html">Manual</a>
</li>
        
<li>
  <a href="../tutorials.html">Tutorials</a>
</li>
        
<li>
  <a href="../examples.html">Examples</a>
</li>
        
      </ul>
        
<ul class="nav navbar-nav navbar-right">
<li>
   <a href="https://github.com/stephenslab/dsc2"> <span class="fa fa-github"></span> </a>
</li>
</ul>
        
      </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Command-interface">Command interface<a class="anchor-link" href="#Command-interface">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>DSC2 implements 2 command programs, <code>dsc</code> and <code>dsc-query</code>, for executing DSC and extracting result from executed benchmarks, respectively.</p>
<h2 id="DSC-main-program">DSC main program<a class="anchor-link" href="#DSC-main-program">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="err">!</span> <span class="n">dsc</span> <span class="o">-</span><span class="n">h</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>usage: dsc [--target str [str ...]] [--truncate] [-o str] [-s option]
           [--touch] [--clean option] [-c N] [--ignore-errors]
           [-v {0,1,2,3,4}] [--host file] [--to-host dir [dir ...]]
           [--version] [-h]
           DSC script

positional arguments:
  DSC script            DSC script to execute.

Customized execution:
  --target str [str ...]
                        This argument can be used in two contexts: 1) When
                        used without &#34;--clean&#34; it overrides &#34;DSC::run&#34; in DSC
                        file. Input should be quoted string(s) defining one or
                        multiple valid DSC pipelines (multiple pipelines
                        should be separated by space). 2) When used along with
                        &#34;--clean&#34; it specifies one or more computational
                        modules, separated by space, whose output are to be
                        removed. Alternatively one can specify path(s) of
                        particular DSC output files that needs to be removed.
                        (default: None)
  --truncate            When applied, DSC will only run one value per
                        parameter. For example with &#34;--truncate&#34;, &#34;seed:
                        R(1:50)&#34; will be truncated to &#34;seed: 1&#34;. This is
                        useful in exploratory analysis and diagnostics,
                        particularly when used in combination with &#34;--target&#34;.
                        (default: False)
  -o str                Benchmark output. It overrides &#34;DSC::output&#34; defined
                        in DSC file. (default: None)

Maintenance:
  -s option, --skip option
                        Behavior of how DSC is executed in the presence of
                        existing results. &#34;default&#34;: skips modules whose
                        &#34;environment&#34; has not been changed since previous
                        execution. &#34;none&#34;: executes DSC from scratch. &#34;all&#34;:
                        skips all execution yet build DSC database of what the
                        specified benchmark is supposed to look like, thus
                        making it possible to explore partial benchmark
                        results. (default: default)
  --touch               &#34;Touch&#34; output files if exist, to mark them &#34;up-to-
                        date&#34;. This option is useful when executed benchmark
                        files are transferred from one computer to another
                        during which file signatures are lost. It will
                        override &#34;--skip&#34; option. Note that time stamp is
                        irrelevant to whether or not a file is up-to-date.
                        (default: False)
  --clean option        Behavior of how DSC removes files. &#34;remove&#34; deletes
                        specified files, or files generated by specified
                        modules via &#34;--target&#34; in current DSC. &#34;replace&#34;,
                        instead of *remove*, will *replace* these files by
                        placeholder files with &#34;*.zapped&#34; extension, so that
                        pipelines involving these files will continue to run
                        without regenerating them unless they are directly
                        required by another module. This is useful to swap out
                        large intermediate files. &#34;purge&#34; cleans up obsolete
                        outputs in folder &#34;DSC::output&#34;, after DSC is executed
                        with &#34;-s none&#34;. (default: None)

Runtime behavior:
  -c N                  Number of maximum cpu threads for local runs, or
                        concurrent jobs for remote execution. (default: 4)
  --ignore-errors       Bypass all errors from computational programs. This
                        will keep the benchmark running but all results will
                        be set to missing values and the problematic script
                        will be saved when possible. (default: False)
  -v {0,1,2,3,4}, --verbosity {0,1,2,3,4}
                        Output error (0), warning (1), info (2), debug (3) and
                        trace (4) information. (default: 2)

Remote execution:
  --host file           Configuration file for remote computer. (default:
                        None)
  --to-host dir [dir ...]
                        Files and directories to be sent to remote host for
                        use in benchmark. (default: None)

Other options:
  --version             show program&#39;s version number and exit
  -h, --help            show this help message and exit
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Here we elaborate on some of these options:</p>
<ul>
<li><p><code>-v</code> controls verbosity level. Default level is 2 (recommended), which displays necessary runtime info and uses a progressbar to display DSC progress. This verbosity level is typically good enough to hide trivial information yet report back errors. When these prompts are not sufficient to fix problems, it is very likely you run into a software bug. It would be very helpful if you could reproduce the bug with increased verbosity level (eg <code>-v4</code>) and post the problem to a <a href="https://github.com/stephenslab/dsc2/issues">github issue</a>.</p>
</li>
<li><p><code>--target</code>: this option takes multiple input.</p>
<ul>
<li><p>When used without <code>--clean</code> it overrides <code>DSC::run</code>, where DSC benchmark is defined. For example, benchmark in DSC file</p>

<pre><code>  run: simulate * method * score</code></pre>
<p>can be re-defined with, for example <code>--target "simulate * method"</code> so that the pipeline <code>simulate * target</code> will be executed instead. Using this option, one can execute DSC bit by bit to debug, eg, <code>"simulate"</code>, then <code>"simulate * method"</code> and finally <code>"simulate * method * score"</code>.</p>
</li>
<li>When used with <code>--clean</code> it specifies the module(s) whose output are to be "clean"-ed up (defined by behavior specified in <code>--clean</code>). Therefore only names of modules or ensembles are valid input in this context, not pipelines for benchmark.</li>
</ul>
</li>
<li><code>--skip</code>: unlike with <code>Make</code> / <code>Snakemake</code> that determines whether or not to re-execute based on time stamps, DSC creates HASH for modules that takes into consideration all input parameter, input and output module variables, and the content of the module script if applicable. When all these information agree with a previous execution it will by default skip those runs. This behavior can be changed by this <code>--skip</code> option. <ul>
<li><code>--skip none</code> will re-execute everything: it will remove and ignore any existing output files. </li>
<li><code>--skip all</code> will not perform any module computations. It will only construct the execution meta-data and create a DSC database that one can query from. That is, <code>dsc &lt;script&gt; --skip all</code> followed by <code>dsc-query &lt;output&gt; -o</code> will help one understand the expected results from specified DSC benchmark. This can also be used as sanity check when benchmark is only partially completed. If you are uncertain about the scale of the benchmark, for example, it is recommanded to run DSC with <code>--skip all</code> and use <code>dsc-query &lt;output&gt; -o</code> to view the benchmark structure.</li>
</ul>
</li>
<li><code>-c</code> configures parallel computing. Since DSC is designed to be executed in either local or remote computers, <code>-c</code> configures the number of CPU threads used when computing in local and number of jobs to be sent when computing on the remote computers, when used with <code>--host</code> option (which will override <code>max_running_jobs</code> in the configuration file). Default value is in fact set to using half of the local computers CPU threads. Thus the displayed default <code>4</code> CPUs in the documentation above is result of running <code>dsc -h</code> on a computer with a total of 8 CPU threads. This number should be specifically configured if one wants to use more (or less) computing power on a desktop; and should definitely be configured for remote job executions based on current queue status of the remote computing environment.</li>
<li><code>--ignore-errors</code> is a flag which, when added, will ignore errors from user provided scripts, thus keeps the benchmark running. There are often situations when we use other people's software packages that produces errors in random corner cases that will interrupt the benchmark from moving forward; sometimes one cannot <code>try ... catch</code> them. With this option, instead of throwing an error, DSC will <strong>store the problematic chunk of code that resulted in an error to the output, creating a dummy output file that keeps DSC moving</strong>. These dummy output will natually result in a chain reaction of failure in every other module that depends on them. But the benchmark will therefore complete, after which one can check the output and trace back the most upstream dummy output as source of errors.</li>
<li><code>--distribute</code>: <strong>FIXME: removed since version 0.2.2 because of pending design decision on how DSC is to be shared. Future version may bring back this feature if our DSC server is properly configured and regularly maintained.</strong> This option will bundle the DSC benchmark into a tarball that can be uploaded to DSC shiny server for data query and visualization, or be transfered to other computational environments. DSC benchmarks should be released and shared with this command. When used without any argument it will pack DSC configuration, project meta data and available output into a tarball. To port the complete benchmark, one should specify additional files such as computational scripts and data used, eg, <code>--distribute /path/to/scripts /path/to/data</code>. </li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="DSC-query-program">DSC query program<a class="anchor-link" href="#DSC-query-program">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-sos"><pre><span></span><span class="err">!</span> <span class="n">dsc</span><span class="o">-</span><span class="n">query</span> <span class="o">-</span><span class="n">h</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>usage: dsc-query [-h] [--version] -o str [--limit N] [--title str]
                 [--description str [str ...]] [-t WHAT [WHAT ...]]
                 [-c WHERE [WHERE ...]] [-g G:A,B [G:A,B ...]] [--add-path]
                 [--language str] [--addon str [str ...]] [-v {0,1,2,3}]
                 DSC output folder

An internal command to extract meta-table for DSC results (requires &#39;sos-
essentials&#39; package to use notebook output).

positional arguments:
  DSC output folder     Path to DSC output.

optional arguments:
  -h, --help            show this help message and exit
  --version             show program&#39;s version number and exit
  -o str                Output notebook / data file name. In query
                        applications if file name ends with &#34;.csv&#34;, &#34;.ipynb&#34;
                        or &#34;.xlsx&#34; then only data file will be saved as result
                        of query. Otherwise both data file in &#34;.xlsx&#34; format
                        and a notebook that displays the data will be saved.
                        (default: None)
  --limit N             Number of rows to display for tables. Default is to
                        display it for all rows (will result in very large
                        HTML output for large benchmarks). (default: -1)
  --title str           Title for notebook file. (default: DSC summary &amp;
                        query)
  --description str [str ...]
                        Text to add under notebook title. Each string is a
                        standalone paragraph. (default: None)
  -t WHAT [WHAT ...], --target WHAT [WHAT ...]
                        Query targets. (default: None)
  -c WHERE [WHERE ...], --condition WHERE [WHERE ...]
                        Query conditions. (default: None)
  -g G:A,B [G:A,B ...], --groups G:A,B [G:A,B ...]
                        Definition of module groups. (default: None)
  --add-path            Save the complete path of data files, not just the
                        base name of file. (default: False)
  --language str        Language kernel to switch to for follow up analysis in
                        notebook generated. (default: None)
  --addon str [str ...]
                        Scripts to load to the notebooks for follow up
                        analysis. Only usable in conjunction with &#34;--
                        language&#34;. (default: None)
  -v {0,1,2,3}, --verbosity {0,1,2,3}
                        Output error (0), warning (1), info (2) and debug (3)
                        information. (default: 2)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This is a companion program to <code>dsc</code> that can be used to extract results from benchmark for given conditions. Although <code>dsc-query</code> works as is, we are extending it to meet language specific demands by creating separate software packages that wraps this command and enhances it -- the approach differs from language to language and will be documented in language specific manner. Therefore we will not provide in-depth documentation to this program.</p>
<p>Currently supported languages specific libraries are:</p>
<ul>
<li>R: <code>dsc_query</code> function for <a href="https://github.com/stephenslab/dsc2/tree/master/dscrutils"><code>dscrutils</code> package</a>.</li>
</ul>

</div>
</div>
</div>
<hr>
&copy 2016-2018 <a href="http://home.uchicago.edu/gaow">Gao Wang</a> at Stephens Lab, the University of Chicago.<br>&nbsp;&nbsp;&nbsp;This wiki is available under the <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution license</a> (read <a href="https://creativecommons.org/licenses/by/4.0/legalcode">full legal text</a>).

</div>
</div>
</body>
</html>
