<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-107286198-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments)};
  gtag('js', new Date());
  gtag('config', 'UA-107286198-1');
</script>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="ipynb_website:version" content="0.9.3" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<link rel="stylesheet" type="text/css" href="../css/jt.css">

<link rel="stylesheet" type="text/css" href="../css/toc2.css">

<link href="../site_libs/jqueryui-1.11.4/jquery-ui.css">
<link rel="stylesheet" href="../site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<link rel="stylesheet" href="../site_libs/font-awesome-4.5.0/css/font-awesome.min.css" rel="stylesheet" />
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
<script src="../site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="../site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="../site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>

<link rel="stylesheet"
      href="../site_libs/highlightjs-1.1/textmate.css"
      type="text/css" />

<script src="../site_libs/highlightjs-1.1/highlight.js"></script>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>

<script src="../js/doc_toc.js"></script>
<script src="../js/docs.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script>
    MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
        },
        "HTML-CSS": {
            preferredFont: "TeX",
            availableFonts: ["TeX"],
            styles: {
                scale: 110,
                ".MathJax_Display": {
                    "font-size": "110%",
                }
            }
        }
    });
</script>
<script>
function filterDataFrame(id) {
    var input = document.getElementById("search_" + id);
    var filter = input.value.toUpperCase();
    var table = document.getElementById("dataframe_" + id);
    var tr = table.getElementsByTagName("tr");
    // Loop through all table rows, and hide those who don't match the search query
    for (var i = 1; i < tr.length; i++) {
        for (var j = 0; j < tr[i].cells.length; ++j) {
            var matched = false;
            if (tr[i].cells[j].innerHTML.toUpperCase().indexOf(filter) != -1) {
                tr[i].style.display = "";
                matched = true
                break;
            }
            if (!matched)
                tr[i].style.display = "none";
        }
    }
}
function sortDataFrame(id, n, dtype) {
    var table = document.getElementById("dataframe_" + id);
    var tb = table.tBodies[0]; // use `<tbody>` to ignore `<thead>` and `<tfoot>` rows
    var tr = Array.prototype.slice.call(tb.rows, 0); // put rows into array
    if (dtype === 'numeric') {
        var fn = function(a, b) { 
            return parseFloat(a.cells[n].textContent) <= parseFloat(b.cells[n].textContent) ? -1 : 1;
        }
    } else {
        var fn = function(a, b) {
            var c = a.cells[n].textContent.trim().localeCompare(b.cells[n].textContent.trim()); 
            return c > 0 ? 1 : (c < 0 ? -1 : 0) }
    }
    var isSorted = function(array, fn) {
        if (array.length < 2)
            return 1;
        var direction = fn(array[0], array[1]); 
        for (var i = 1; i < array.length - 1; ++i) {
            var d = fn(array[i], array[i+1]);
            if (d == 0)
                continue;
            else if (direction == 0)
                direction = d;
            else if (direction != d)
                return 0;
            }
        return direction;
    }
    var sorted = isSorted(tr, fn);
    if (sorted == 1 || sorted == -1) {
        // if sorted already, reverse it
        for(var i = tr.length - 1; i >= 0; --i)
            tb.appendChild(tr[i]); // append each row in order
    } else {
        tr = tr.sort(fn);
        for(var i = 0; i < tr.length; ++i)
            tb.appendChild(tr[i]); // append each row in order
    }
}
</script>

<script>
$( document ).ready(function(){
            var cfg={'threshold':3,     // depth of toc (number of levels)
             'number_sections': false,
             'toc_cell': false,          // useless here
             'toc_window_display': true, // display the toc window
             "toc_section_display": "block", // display toc contents in the window
             'sideBar':true,       // sidebar or floating window
             'navigate_menu':false       // navigation menu (only in liveNotebook -- do not change)
            }
            var st={};                  // some variables used in the script
            st.rendering_toc_cell = false;
            st.config_loaded = false;
            st.extension_initialized=false;
            st.nbcontainer_marginleft = $('#notebook-container').css('margin-left')
            st.nbcontainer_marginright = $('#notebook-container').css('margin-right')
            st.nbcontainer_width = $('#notebook-container').css('width')
            st.oldTocHeight = undefined
            st.cell_toc = undefined;
            st.toc_index=0;
            // fire the main function with these parameters
            table_of_contents(cfg, st);
            var file=manualDict[$("h1:first").attr("id")];
            $("#toc-level0 a").css("color","#126dce");
            $('a[href="#'+$("h1:first").attr("id")+'"]').hide()
            var docs=manualArray;
            var pos=manualArray.indexOf(file);
            for (var a=pos;a>=0;a--){
                  var name=docs[a]
                  $('<li><a href="'+name+'.html"><font color="#073642"><b>'+name.replace(/_/g," ")+'</b></font></a></li>').insertBefore("#toc-level0 li:eq(0)");
            }
            $('a[href="'+file+'.html'+'"]').css("color","#126dce");
            for (var a=pos+1;a<docs.length;a++){
                  var name=docs[a]
                  $(".toc #toc-level0").append('<li><a href="'+name+'.html"><font color="#073642"><b>'+name.replace(/_/g," ")+'</b></font></a></li>');
            }
            // $("#toc-header").hide(); // comment out because it prevents search bar from displaying
    });
</script>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');
  // mark it active
  menuAnchor.parent().addClass('active');
  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>
<div class="container-fluid main-container">
<!-- tabsets -->
<script src="../site_libs/navigation-1.1/tabsets.js"></script>
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>



<title>Dynamic Statistical Comparisons</title>

<style type = "text/css">
body {
  font-family: "Droid Sans";
  padding-top: 66px;
  padding-bottom: 40px;
}
</style>
</head>

<body>
<div tabindex="-1" id="notebook" class="border-box-sizing">
<div class="container" id="notebook-container">

<!-- code folding -->

<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">Dynamic Statistical Comparisons</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
<li>
  <a href="../index.html">Overview</a>
</li>
        
<li>
  <a href="../quick_start.html">Quick Start</a>
</li>
        
<li>
  <a href="../manual.html">Manual</a>
</li>
        
<li>
  <a href="../tutorials.html">Tutorials</a>
</li>
        
<li>
  <a href="../examples.html">Examples</a>
</li>
        
      </ul>
        
<ul class="nav navbar-nav navbar-right">
<li>
   <a href="https://github.com/stephenslab/dsc2"> <span class="fa fa-github"></span> </a>
</li>
</ul>
        
      </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Design-and-Features">Design and Features<a class="anchor-link" href="#Design-and-Features">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Design-Overview">Design Overview<a class="anchor-link" href="#Design-Overview">&#182;</a></h2><p>DSC2 is designed to manage and execute all computations required for <em>Dynamic Statistical Comparisons</em>. Typically such comparisons involve generating (or gathering) data, performing statistical analyses and evaluating performance of statistical procedures applied. Each step takes some input data from previous step (unless it is the first step) and create some output to be passed to the next step, or to be interpreted as the outcome of the DSC. A DSC user thus has two jobs: define computational steps (as <a href="Terminology.html">DSC modules</a>), and specify how the steps are connected to be executed (as <a href="Terminology.html">DSC pipelines</a>).</p>
<p>As a first pass to illustrating the DSC design, let's consider a DSC sequence consists of 3 types of steps: <strong>scenarios</strong>, <strong>methods</strong> and <strong>scores</strong>, where</p>
<ul>
<li><strong>scenarios</strong>: provide input data and / or configures computational routines that generate input data.</li>
<li><strong>methods</strong>: defines statistical procedures that analyzes data.</li>
<li><strong>scores</strong>: defines methods that evaluates the result of data analyses compared to the "truth" (model from which the data is generated) and calculates scores that measures performance of methods.</li>
</ul>
<p>In practice DSC is more generic and flexible -- one does not have to follow this paradigm when composing a DSC, as long as steps and sequences are properly defined. You may often have incomplete DSC in the exploratory phase of a project as you develop methods.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The example below follows the aforementioned 3 steps paradigm but we will allow for combinations of computational steps as illustrated in pipelines below,</p>
<p><strong>FIXME: to be replaced by an Adobe Illustrator figure</strong></p>

<pre><code>  | scenario 1               |    | method 1 -&gt;                      |    | score 1 |
  | scenario 2               | -&gt; | method 2 -&gt; method 1             | -&gt; | score 2 |
  | scenario 1 -&gt; scenario 3 |    | method 3 -&gt; method 2 -&gt; method 1 |    | ...     |
  | scenario 4 -&gt; ...        |    | method 4 -&gt; ...                  |    | ...     |</code></pre>
<p>where each <strong>scenario</strong>, <strong>method</strong> and <strong>score</strong> is a computational step which can be different approaches to generate data, perform statistical analysis, or measure performance of methods, or can be the same approaches with different parameter settings. The arrows connects the computational steps into sequences.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="A-Case-Study">A Case Study<a class="anchor-link" href="#A-Case-Study">&#182;</a></h2><p>To understand the DSC design we review a simple example with (mostly) self-explanatory syntax. DSC syntax is completely documented <a href="DSC_Configuration.html">elsewhere</a>; readers should not worry about learning the syntax at this point.</p>
<p>In this example we compare methods of estimating location parameter from data. We use data generated from <em>t</em> distribution and Cauchy distribution, remove outliers (with two Winsorization methods) and estimate mean (via sample average or median), and evaluate performance of sequences of these steps by comparing the estimate with the "ground truth" in terms of mean squared error.</p>
<h3 id="DSC-script">DSC script<a class="anchor-link" href="#DSC-script">&#182;</a></h3>
<pre><code>t, cauchy: rt.R, rcauchy.R
 replicate: R(1:5)
 n: 1000
 true_loc: 0, 1
 $x: x
 $true_loc: true_loc

winsor1, winsor2: winsor1.R, winsor2.R
 x: $x
 @winsor1:
     fraction: 0.05
 @winsor2:
     multiple: 3
 $x: x

mean, median: mean.R, median.R
  x: $x
  $loc: loc

mse: mse.R
  mean_est: $loc
  true_mean: $true_loc
  $mse: mse

DSC:
  define: 
      simulate: t, cauchy
      transform: winsor1, winsor2
      estimate: mean, median
      score: mse
  run: simulate *
       (transform * estimate, estimate) *
       score
  exec_path: R
  output: dsc_result</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="DSC-execution">DSC execution<a class="anchor-link" href="#DSC-execution">&#182;</a></h3><p>The sequence to execute:</p>

<pre><code>      run: simulate *
           (transform * estimate, estimate) *
           score</code></pre>
<p>will be expanded to 2 sequences:</p>
<ol>
<li><code>simulate -&gt; transform -&gt; estimate -&gt; score</code></li>
<li><code>simulate -&gt; estimate -&gt; score</code></li>
</ol>
<p>Or 12 sequences in terms of computational executables</p>
<ol>
<li><code>rt.R -&gt; winsor1.R -&gt; mean.R -&gt; mse.R</code></li>
<li><code>rt.R -&gt; winsor1.R -&gt; median.R -&gt; mse.R</code></li>
<li><code>rt.R -&gt; winsor2.R -&gt; mean.R -&gt; mse.R</code></li>
<li><code>rt.R -&gt; winsor2.R -&gt; median.R -&gt; mse.R</code></li>
<li><code>rcauchy.R -&gt; winsor1.R -&gt; mean.R -&gt; mse.R</code></li>
<li><code>rcauchy.R -&gt; winsor1.R -&gt; median.R -&gt; mse.R</code></li>
<li><code>rcauchy.R -&gt; winsor2.R -&gt; mean.R -&gt; mse.R</code></li>
<li><code>rcauchy.R -&gt; winsor2.R -&gt; median.R -&gt; mse.R</code></li>
<li><code>rt.R -&gt; mean.R -&gt; mse.R</code></li>
<li><code>rt.R -&gt; median.R -&gt; mse.R</code></li>
<li><code>rcauchy.R -&gt; mean.R -&gt; mse.R</code></li>
<li><code>rcauchy.R -&gt; median.R -&gt; mse.R</code></li>
</ol>
<p>By allowing for different parameters to each executable, more combinations are implicitly defined and consequently more unique sequences executed.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="A-brief-narrative-to-the-case-study">A brief narrative to the case study<a class="anchor-link" href="#A-brief-narrative-to-the-case-study">&#182;</a></h2><p>As has been previously motivated, there are 3 steps in this example: <strong>scenarios</strong>, <strong>methods</strong> and <strong>scores</strong>.</p>
<p>The <strong>scenarios</strong> part is the first code block in the file, which has two computational executables <code>rcauchy.R</code> and <code>rt.R</code>. These routines generate <code>n</code> random samples under Cauchy distribution with location parameter <code>true_loc</code>, and <em>t</em> distribution with non-centrality parameter <code>true_loc</code>, respectively. There are 2 choices of computational routines, each routine has one choice of <code>n</code> (1000) and two choices of <code>true_loc</code> (0 and 1). 5 replicates are evaluated as defined by <code>replicate</code>. As a result, this code block will result in 20 parallel computations.</p>
<p>The <strong>methods</strong> part consists of <code>transform</code> and <code>estimate</code>. <code>transform</code> performs two types of winsorization on input data. <code>estimate</code> has two computational routines to estimate location parameter, via sample mean (<code>mean.R</code>) and median (<code>median.R</code>) respectively. There are two types of procedures for <strong>methods</strong>: the first is <code>transform + estimate</code> which runs the <code>transform</code> family of steps first, then run the <code>estimate</code> family after data has been transformed; the second is <code>estimate</code> which directly performs parameter estimation with the original data produced by its upstream steps, ie, from the <strong>scenarios</strong> part.</p>
<p>The <strong>scores</strong> part is <code>score</code>, which has a single computational routine <code>mse.R</code> to calculate the mean square error as a summary of comparison between the <em>true</em> (<code>true_mean</code>) and <em>estimated</em> (<code>mean_est</code>) location parameters, taking <code>$true_loc</code> and <code>$loc</code> respectively corresponding to the <em>output</em> values from previous steps in <strong>scenarios</strong> and <strong>methods</strong></p>
<p>In this case study, the design of blocks logically follows the <strong>scenarios</strong>, <strong>methods</strong> (pre-processing via <code>transformation</code> and analysis via <code>estimate</code>), and <strong>scores</strong> paradigm. It does not have to be this way, though: one can even make separated blocks for each computational routine (in this case for every R script) and combine them in the <em>run</em> sequence in <em>DSC</em> section in a fashion simular to the 12 pipelines expanded from this DSC as shown in the previous section of this document -- it is a decision users has the liberty to make based on style preference and logic.</p>
<h2 id="Output-files">Output files<a class="anchor-link" href="#Output-files">&#182;</a></h2><p>Computational results and communications throughout DSC will be handled implicitly. Users do not have to worry about file output. Yet users are responsible for matching variables specified in DSC script to what are in fact written in provided computational routines. This is a key feature of DSC.</p>

</div>
</div>
</div>
<hr>
&copy 2016-2018 <a href="http://home.uchicago.edu/gaow">Gao Wang</a> at Stephens Lab, the University of Chicago.<br>&nbsp;&nbsp;&nbsp;This wiki is available under the <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution license</a> (read <a href="https://creativecommons.org/licenses/by/4.0/legalcode">full legal text</a>).

</div>
</div>
</body>
</html>
