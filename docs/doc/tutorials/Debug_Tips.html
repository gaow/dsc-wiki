<!DOCTYPE html>
<html>
<head><meta charset="utf-8" />
<title>Debug_Tips</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>








<!-- Custom stylesheet, it must be in the same directory as the html file -->
<link rel="stylesheet" href="custom.css">

<!-- Loading mathjax macro -->
<!-- Load mathjax -->
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
    <!-- MathJax configuration -->
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true,
            processEnvironments: true
        },
        // Center justify equations in code and markdown cells. Elsewhere
        // we use CSS to left justify single line equations in code cells.
        displayAlign: 'center',
        "HTML-CSS": {
            styles: {'.MathJax_Display': {"margin": 0}},
            linebreaks: { automatic: true }
        }
    });
    </script>
    <!-- End of mathjax configuration --></head>

 <link rel="stylesheet" href="http://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>

<style>  /* defined here in case the main.css below cannot be loaded */
.lev1 {margin-left: 80px}
.lev2 {margin-left: 100px}
.lev3 {margin-left: 120px}
.lev4 {margin-left: 140px}
.lev5 {margin-left: 160px}
.lev6 {margin-left: 180px}
</style>


<link rel="stylesheet" type="text/css" href="../../css/jt.css">
<link rel="stylesheet" type="text/css" href="../../css/toc2.css">

<script src="../../js/toc2.js"></script>
<script src="../../js/docs.js"></script>

<script>
$( document ).ready(function(){

            var cfg={'threshold':3,     // depth of toc (number of levels)
             'number_sections': false,  // sections numbering
             'toc_cell': false,          // useless here
             'toc_window_display': true, // display the toc window
             "toc_section_display": "block", // display toc contents in the window
             'sideBar':true,       // sidebar or floating window
             'navigate_menu':false       // navigation menu (only in liveNotebook -- do not change)
            }

            var st={};                  // some variables used in the script
            st.rendering_toc_cell = false;
            st.config_loaded = false;
            st.extension_initialized=false;
            st.nbcontainer_marginleft = $('#notebook-container').css('margin-left')
            st.nbcontainer_marginright = $('#notebook-container').css('margin-right')
            st.nbcontainer_width = $('#notebook-container').css('width')
            st.oldTocHeight = undefined
            st.cell_toc = undefined;
            st.toc_index=0;

            // fire the main function with these parameters


            table_of_contents(cfg,st);


            var file=tutorialsDict[$("h1:first").attr("id")];
            $("#toc-level0 a").css("color","#126dce");
            $('a[href="#'+$("h1:first").attr("id")+'"]').hide()
            
            var tuts=tutorials;
            var pos=tutorials.indexOf(file);
        
            for (var a=pos;a>=0;a--){
                  var name=tuts[a]
                  $('<li><a href="'+name+'.html">'+name.replace(/_/g," ")+'</a></li>').insertBefore("#toc-level0 li:eq(0)");
            }
            $('a[href="'+file+'.html'+'"]').css("color","#126dce");

            $('<li id="indexHome"><a href="../../tutorials.html"><b>Tutorials Home<b></a></li>').insertBefore("#toc-level0 li:eq(0)");
            for (var a=pos+1;a<tuts.length;a++){
                  var name=tuts[a]
                  $(".toc #toc-level0").append('<li><a href="'+name+'.html">'+name.replace(/_/g," ")+'</a></li>');
            }
            $("#toc-header").hide();


    });
</script>
<body>
  <div tabindex="-1" id="notebook" class="border-box-sizing">
    <div class="container" id="notebook-container">

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Debugging-in-DSC2">Debugging in DSC2<a class="anchor-link" href="#Debugging-in-DSC2">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Intermediate-scripts">Intermediate scripts<a class="anchor-link" href="#Intermediate-scripts">&#182;</a></h2><p>Under the hood, DSC2 generates R, Python or Shell scripts based on computational routines provided in <code>exec</code> entries and executes these scripts to complete the computational tasks. When there is an error from provided computational routine the DSC procedure will fail. However the automatically generated script will be saved to disk and DSC2 will point you to the script in question so that you can debug interactively. For example, we break the R script below by executing an undefined function <code>undefined_foo_showoff</code>:</p>
<div class="highlight"><pre><span></span>undefined_foo_showoff<span class="p">()</span>
score <span class="o">=</span> <span class="kr">function</span><span class="p">(</span>est<span class="p">,</span> truth<span class="p">){</span>
  <span class="kr">return</span><span class="p">(</span><span class="kp">sqrt</span><span class="p">(</span><span class="kp">mean</span><span class="p">((</span>est<span class="o">-</span>truth<span class="p">)</span><span class="o">^</span><span class="m">2</span><span class="p">)))</span>
<span class="p">}</span>
result <span class="o">=</span> score<span class="p">(</span>est<span class="p">,</span> truth<span class="p">)</span>
</pre></div>
<p>And the DSC run fails as expected:</p>

<pre><code>INFO: Constructing DSC from settings.dsc ...
INFO: DSC exported to settings.html
simulate:1+shrink:1+beta_score:1:   0.0% [&gt;      ]  in 00:00:00

Error: could not find function "undefined_foo_showoff"
Execution halted
ERROR: Failed to process statement "sos_run('simulate_1+shrink_1+beta_score_1')": Failed to execute process
"R(r'''## BEGIN code auto-gener...1.0\n\n''')\n"
Failed to execute script. The script is saved to /home/gaow/GIT/software/dsc2/vignettes/ash/.sos/beta_score_1_0.R. Please use command "Rscript --default-packages=datasets,methods,utils,stats,grDevices,graphics  /home/gaow/GIT/software/dsc2/vignettes/ash/.sos/beta_score_1_0.R" under /home/gaow/GIT/software/dsc2/vignettes/ash to test it.</code></pre>
<p>In the error message you see that the problematic script is saved to <code>.sos/beta_score_1_0.R</code>. You can run this script to debug without having to worry about the input / output because DSC automatically completed it. Then you can apply the fix to your original script and re-run the benchmark.</p>
<h2 id="Log-files">Log files<a class="anchor-link" href="#Log-files">&#182;</a></h2><p>The run-time information are kept in greater detail in <code>*.log</code> file. For the example above you should see <code>settings.log</code> generated for the DSC run. You can look into the log file for more run-time information and perform diagnostics.</p>

</div>
</div>
</div>
    </div>
  </div>
</body>
</html>
